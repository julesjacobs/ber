- [x] Initial OCaml parser/CLI setup and .ber examples committed
- [x] Read AGENTS.md
- [x] HM inference plan and types: define core type representations, schemes, env and error reporting
- [x] AST type conversion and unification utilities (occurs check, substitution, generalize/instantiate)
- [x] Expression and pattern inference (let/letrec, match, functions, constructors) with ADT environment
- [x] Integrate #type pragma in CLI to output inferred types or type errors per toplevel
- [x] Refresh .ber outputs (especially #type cases) and sanity-check examples
- [x] Challenge corpus added under ber/challenges/ (kept out of ber.sh rewriting)
- [ ] Open issues / follow-ups:
  - [ ] Partial constructor application currently rejected (see CR in ber/typing/adt.ber)
  - [ ] Tuple arity mismatch on patterns not flagged (see CR in ber/typing/match.ber)
  - [ ] CLI output still contains many blank lines; consider trimming for readability
  - [ ] Grammar lacks infix operators; several fixtures use prefix/inlined operations to avoid syntax errorsâ€”decide whether to extend syntax or adjust tests
- [ ] Typing tests to add in ber/typing:
  - [ ] Simple values/vars: int/bool/string literals; shadowing; unbound var error
  - [ ] Functions: single/multi-arg lambdas; annotations on params; polymorphic id/const; higher-order (apply_twice)
  - [ ] Let vs let rec: nonrecursive bindings; recursive function; recursive value (should error on non-function); mutual recursion?
  - [ ] Pattern matching: tuples; constructor patterns; as-pattern; wildcard; guard checks; match result type consistency; arity mismatches
  - [ ] Constructors/ADTs: arity mismatch errors; unknown constructor; custom types with params; constructors used in patterns/expressions
  - [ ] Type annotations/ascriptions: correct/incorrect annotation errors; annotated let-binding; annotated expression; nested annotations
  - [ ] Type applications: tuple types; arrow associativity; type parameter arity mismatch errors
  - [ ] Type generalization: polymorphic let; using polymorphic values multiple times; value restriction gaps (ensure current behavior)
  - [ ] Error cases: recursive types (occurs check); type mismatch in app; guard not bool; pattern tuple arity mismatch; match with missing constructors is allowed but type errors surfaced
- [ ] #type output formatting: type declarations, let bindings, expressions; multiple errors reported in one file
- [ ] Fix ber-cli rewriting issues:
  - [x] Reproduce newline/output stripping bug locally
  - [x] Adjust parsing/emission to strip old outputs cleanly and avoid extra blank lines
  - [x] Run ./ber.sh and review fixture diffs
